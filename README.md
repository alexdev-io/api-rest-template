<div align="center">

<img src="https://readme-typing-svg.demolab.com?font=Fira+Code&weight=700&size=22&duration=3000&pause=1000&color=00E5FF&center=true&vCenter=true&width=700&lines=api-rest-template;Fastify+%2B+TypeScript+%2B+Prisma+%2B+Zod+%E2%80%94+production-ready." alt="header" />

<br/>

<img src="https://img.shields.io/badge/Fastify-4-000000?style=for-the-badge&logo=fastify&labelColor=0d0d0d" />
<img src="https://img.shields.io/badge/TypeScript-5.3-3178C6?style=for-the-badge&logo=typescript&labelColor=0d0d0d" />
<img src="https://img.shields.io/badge/Prisma-5-2D3748?style=for-the-badge&logo=prisma&labelColor=0d0d0d" />
<img src="https://img.shields.io/badge/Zod-Validation-3E67B1?style=for-the-badge&labelColor=0d0d0d" />
<img src="https://img.shields.io/badge/Vitest-Testing-6E9F18?style=for-the-badge&logo=vitest&labelColor=0d0d0d" />

</div>

---

## `> overview`

Production-ready REST API boilerplate. Clone, configure `.env`, and ship.

Includes: JWT auth with refresh token rotation, Zod validation (runtime + compile-time), Prisma 5 ORM, OpenAPI/Swagger UI autogenerated, and a full testing suite (unit + integration + e2e).

---

## `> stack`

| Layer | Choice | Why |
|:---|:---|:---|
| Framework | Fastify 4 | Schema-first, ~2× faster than Express |
| Language | TypeScript 5.3 strict | Full type safety end-to-end |
| ORM | Prisma 5 | Type-safe queries, auto migrations |
| Validation | Zod | Runtime validation + inferred types |
| Auth | JWT access (15m) + refresh (7d) | Stateless, token rotation |
| Testing | Vitest | Native TypeScript, fast |
| Docs | OpenAPI + Swagger UI | Autogenerated at `/docs` |

---

## `> auth flow`

```
POST /auth/register   →  { user, accessToken, refreshToken }
POST /auth/login      →  { user, accessToken, refreshToken }

access token   — 15m, Bearer header
refresh token  — 7d, rotated on every use (old revoked, new issued)

POST /auth/refresh    →  { accessToken, refreshToken }  ← rotation
POST /auth/logout     →  revoke current RT
POST /auth/logout-all →  revoke all RTs (all devices)
```

---

## `> quick start`

```bash
npm install
cp .env.example .env          # set DATABASE_URL + JWT secrets

docker-compose up db -d       # start postgres
npm run db:migrate            # run migrations
npm run db:seed               # admin@example.com / Admin1234!

npm run dev                   # http://localhost:3000
                              # Swagger: http://localhost:3000/docs
```

---

## `> endpoints`

| Method | Path | Auth | Description |
|:---|:---|:---:|:---|
| `GET`    | `/api/v1/health`          | —     | Health + DB check |
| `POST`   | `/api/v1/auth/register`   | —     | Register |
| `POST`   | `/api/v1/auth/login`      | —     | Login |
| `POST`   | `/api/v1/auth/refresh`    | —     | Refresh token |
| `POST`   | `/api/v1/auth/logout`     | ✓     | Logout |
| `POST`   | `/api/v1/auth/logout-all` | ✓     | Logout all devices |
| `GET`    | `/api/v1/users/me`        | ✓     | Own profile |
| `PATCH`  | `/api/v1/users/me`        | ✓     | Update profile |
| `GET`    | `/api/v1/users`           | Admin | List users |
| `GET`    | `/api/v1/users/:id`       | Admin | Get user |
| `DELETE` | `/api/v1/users/:id`       | Admin | Delete user |

---

## `> testing`

```bash
npm test                  # all tests
npm run test:coverage     # with coverage report
npm run test:e2e          # e2e only
```

```
tests/
├── unit/               # mocked prisma, pure service logic
├── integration/        # real DB + Fastify inject()
│   ├── auth.test.ts
│   └── users.test.ts
└── e2e/
    └── health.test.ts
```

---

## `> adding a module`

```bash
mkdir src/modules/posts
# posts.schema.ts   ← Zod schemas
# posts.service.ts  ← Prisma queries
# posts.routes.ts   ← Fastify routes + OpenAPI schema

# Register in src/app.ts:
# await app.register(postsRoutes, { prefix: `/api/${env.API_VERSION}/posts` });

# Add Prisma model + migrate:
# npx prisma migrate dev --name add_posts
```

---

<div align="center">

*Built by [@alexpatinoa](https://github.com/alexpatinoa) · [alexdev-io](https://github.com/alexdev-io)*

</div>
